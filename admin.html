<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="iniciosesion.css">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="admin.html">
  <link rel="stylesheet" href="dashboard.css">
  <script src="src/verifyLogin.js"></script>
</head>

<body><br><br>.


  <section class="d-flex flex-column justify-content-center align-items-center">


    <div class="row g-0">
      <div class="col-lg-6 d-flex flex-column justify-content-center align-items-center ">
        <script src="https://d3js.org/d3.v6.min.js"></script>
        <svg id="chart"></svg>
        <style>
          .bar {
            fill: steelblue;
          }

          .bar-label {
            fill: #fff;
            font-family: sans-serif;
            font-size: 12px;
            text-anchor: middle;
          }
        </style>

        <script>

          document.addEventListener('DOMContentLoaded', async function () {


            // Datos de ejemplo
            const res = await fetch('http://127.0.0.1:3000/countbygroup', {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json'
              }
            })
            const data = await res?.json()
            const { paquetes } = data

            // Configuración del gráfico
            var ancho = 400; // Ancho del gráfico
            var alto = 300; // Alto del gráfico
            var margen = { top: 20, right: 20, bottom: 30, left: 40 }; // Márgenes del gráfico

            // Crear el lienzo SVG
            var svg = d3.select('#chart')
              .attr('width', ancho + margen.left + margen.right)
              .attr('height', alto + margen.top + margen.bottom)
              .append('g')
              .attr('transform', 'translate(' + margen.left + ',' + margen.top + ')');

            // Escala para el eje x (estados de los paquetes)
            var x = d3.scaleBand()
              .range([0, ancho])
              .padding(0.1)
              .domain(paquetes.map(function (d) { return d.state; }));

            // Escala para el eje y (cantidad de paquetes)
            var y = d3.scaleLinear()
              .range([alto, 0])
              .domain([0, d3.max(paquetes, function (d) { return d.count; })]);

            // Crear las barras del gráfico
            svg.selectAll('.bar')
              .data(paquetes)
              .enter().append('rect')
              .attr('class', 'bar')
              .attr('x', function (d) { return x(d.state); })
              .attr('width', x.bandwidth())
              .attr('y', function (d) { return y(d.count); })
              .attr('height', function (d) { return alto - y(d.count); });

            // Agregar el eje x
            svg.append('g')
              .attr('transform', 'translate(0,' + alto + ')')
              .call(d3.axisBottom(x));

            // Agregar el eje y
            svg.append('g')
              .call(d3.axisLeft(y));

            // Agregar etiquetas al eje x
            svg.selectAll('.bar-label')
              .data(paquetes)
              .enter().append('text')
              .attr('class', 'bar-label')
              .attr('x', function (d) { return x(d.state) + x.bandwidth() / 2; })
              .attr('y', function (d) { return y(d.count) - 5; })
              .attr('text-anchor', 'middle')
              .text(function (d) { return d.count; });
          });
        </script>


      </div>




      <section class="d-flex justify-content-center">

        <div class="col-lg-6 ">

          <div class="container py-3 ">


            <div class="card" style="border-radius: 15px; height: 200px; background-color: #f8f8f8;">
              <div class="card-body p-4 ">
                <div>
                  <h6 class="mb-4" style="color: #f8f8f8;">admin</h6>
                  <div class="d-flex align-items-center justify-content-between mb-3">


                  </div>
                </div>
                <div class="d-flex align-items-center mb-4">
                  <div class="flex-shrink-0">
                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-profiles/avatar-2.webp"
                      alt="Generic placeholder image" class="img-fluid rounded-circle border border-dark border-3"
                      style="width: 70px;">
                  </div>
                  <div class="flex-grow-1 ms-3">
                    <div class="d-flex flex-row align-items-center mb-2">
                      <p class="mb-0 me-2">
                      <h3 style="color: #f8f8f8;"> Diego Contreras</h3< /p>
                        <ul class="mb-0 list-unstyled d-flex flex-row" style="color: #d1d1d1;">

                        </ul>
                    </div>

                  </div>
                </div>
                <hr>



              </div>
            </div>
          </div>
        </div>
    </div>
  </section>
  </div>


  </div>
  </div>
  </section>
















  <!-- Bootstrap-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- DataTable -->
  <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
  <!-- Custom JS -->
  <script src="main.js"></script>
</body>

</section>

<!--archivos JavaScript de Bootstrap -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="src/graphic.js"></script>
</body>

</html>